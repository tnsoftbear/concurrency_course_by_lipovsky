=================================================================
==3940609==ERROR: LeakSanitizer: detected memory leaks

Indirect leak of 29237248 byte(s) in 7138 object(s) allocated from:
    #0 0x55ee0f6be3bd in operator new(unsigned long) (/tmp/clippy-build/FaultyFibersASan/tasks/tasks/executors/bin/task_tasks_executors_strand_lifetime_tests+0x19e3bd) (BuildId: ee3f60473ef9d62923a5461370b8fb9a170ba1b0)
    #1 0x55ee0f7b38b8 in void* std::__1::__libcpp_operator_new<unsigned long>(unsigned long) /usr/lib/llvm-14/bin/../include/c++/v1/new:245:10
    #2 0x55ee0f7b38b8 in std::__1::__libcpp_allocate(unsigned long, unsigned long) /usr/lib/llvm-14/bin/../include/c++/v1/new:271:10
    #3 0x55ee0f7b38b8 in std::__1::allocator<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> > >::allocate(unsigned long) /usr/lib/llvm-14/bin/../include/c++/v1/__memory/allocator.h:105:38
    #4 0x55ee0f7b38b8 in std::__1::allocator_traits<std::__1::allocator<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> > > >::allocate(std::__1::allocator<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> > >&, unsigned long) /usr/lib/llvm-14/bin/../include/c++/v1/__memory/allocator_traits.h:262:20
    #5 0x55ee0f7b38b8 in std::__1::deque<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >, std::__1::allocator<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> > > >::__add_back_capacity() /usr/lib/llvm-14/bin/../include/c++/v1/deque:2586:13
    #6 0x55ee0f7b347e in std::__1::deque<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >, std::__1::allocator<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> > > >::push_back(fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >&&) /usr/lib/llvm-14/bin/../include/c++/v1/deque:1938:9
    #7 0x55ee0f7b139b in std::__1::queue<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >, std::__1::deque<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >, std::__1::allocator<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> > > > >::push(fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >&&) /usr/lib/llvm-14/bin/../include/c++/v1/queue:355:41
    #8 0x55ee0f7b139b in exe::support::UnboundedBlockingQueue<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> > >::Put(fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >) /workspace/concurrency-course/tasks/tasks/executors/exe/support/queue.hpp:52:14
    #9 0x55ee0f7af734 in exe::executors::Strand::Submit(fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >) /workspace/concurrency-course/tasks/tasks/executors/exe/executors/strand.cpp:20:10
    #10 0x55ee0f6c2ab2 in void exe::executors::Submit<Automaton::AsyncMutate()::'lambda'()>(exe::executors::IExecutor&, Automaton::AsyncMutate()::'lambda'()&&) /workspace/concurrency-course/tasks/tasks/executors/exe/executors/submit.hpp:18:7
    #11 0x55ee0f6c0dfd in Automaton::AsyncMutate() /workspace/concurrency-course/tasks/tasks/executors/tests/executors/strand/lifetime.cpp:22:5
    #12 0x55ee0f6c0dfd in StressTest() /workspace/concurrency-course/tasks/tasks/executors/tests/executors/strand/lifetime.cpp:48:18
    #13 0x55ee0f6c1f33 in TestSuiteStrand::TwistTestRoutineAutomaton() /workspace/concurrency-course/tasks/tasks/executors/tests/executors/strand/lifetime.cpp:63:5
    #14 0x55ee0f6c1f33 in TestSuiteStrand::TestRoutineAutomaton()::$_0::operator()() const /workspace/concurrency-course/tasks/tasks/executors/tests/executors/strand/lifetime.cpp:62:3
    #15 0x55ee0f6c1f33 in decltype(std::forward<TestSuiteStrand::TestRoutineAutomaton()::$_0&>(fp)()) fu2::abi_400::detail::invocation::invoke<TestSuiteStrand::TestRoutineAutomaton()::$_0&>(TestSuiteStrand::TestRoutineAutomaton()::$_0&) /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:222:10
    #16 0x55ee0f6c1f33 in fu2::abi_400::detail::type_erasure::invocation_table::function_trait<void ()>::internal_invoker<fu2::abi_400::detail::type_erasure::box<false, TestSuiteStrand::TestRoutineAutomaton()::$_0, std::__1::allocator<TestSuiteStrand::TestRoutineAutomaton()::$_0> >, true>::invoke(fu2::abi_400::detail::type_erasure::data_accessor*, unsigned long) /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:628:1
    #17 0x55ee0f766bbe in decltype(auto) fu2::abi_400::detail::type_erasure::erasure<true, fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >::invoke<0ul, fu2::abi_400::detail::type_erasure::erasure<true, fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >&>(fu2::abi_400::detail::type_erasure::erasure<true, fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >&) /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:1258:37
    #18 0x55ee0f766bbe in fu2::abi_400::detail::type_erasure::invocation_table::operator_impl<0ul, fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >, void ()>::operator()() /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:816:1
    #19 0x55ee0f766bbe in twist::rt::fiber::Fiber::Run() /tmp/clippy-build/FaultyFibersASan/_deps/twist-src/twist/rt/layer/fiber/runtime/fiber.cpp:29:5

Indirect leak of 1142080 byte(s) in 7138 object(s) allocated from:
    #0 0x55ee0f6be3bd in operator new(unsigned long) (/tmp/clippy-build/FaultyFibersASan/tasks/tasks/executors/bin/task_tasks_executors_strand_lifetime_tests+0x19e3bd) (BuildId: ee3f60473ef9d62923a5461370b8fb9a170ba1b0)
    #1 0x55ee0f6c4eca in void* std::__1::__libcpp_operator_new<unsigned long>(unsigned long) /usr/lib/llvm-14/bin/../include/c++/v1/new:245:10
    #2 0x55ee0f6c4eca in std::__1::__libcpp_allocate(unsigned long, unsigned long) /usr/lib/llvm-14/bin/../include/c++/v1/new:271:10
    #3 0x55ee0f6c4eca in std::__1::allocator<std::__1::__shared_ptr_emplace<Automaton, std::__1::allocator<Automaton> > >::allocate(unsigned long) /usr/lib/llvm-14/bin/../include/c++/v1/__memory/allocator.h:105:38
    #4 0x55ee0f6c4eca in std::__1::allocator_traits<std::__1::allocator<std::__1::__shared_ptr_emplace<Automaton, std::__1::allocator<Automaton> > > >::allocate(std::__1::allocator<std::__1::__shared_ptr_emplace<Automaton, std::__1::allocator<Automaton> > >&, unsigned long) /usr/lib/llvm-14/bin/../include/c++/v1/__memory/allocator_traits.h:262:20
    #5 0x55ee0f6c4eca in std::__1::__allocation_guard<std::__1::allocator<std::__1::__shared_ptr_emplace<Automaton, std::__1::allocator<Automaton> > > >::__allocation_guard<std::__1::allocator<Automaton> >(std::__1::allocator<Automaton>, unsigned long) /usr/lib/llvm-14/bin/../include/c++/v1/__memory/allocation_guard.h:53:18
    #6 0x55ee0f6c4eca in std::__1::shared_ptr<Automaton> std::__1::allocate_shared<Automaton, std::__1::allocator<Automaton>, exe::executors::tp::compute::ThreadPool&, void>(std::__1::allocator<Automaton> const&, exe::executors::tp::compute::ThreadPool&) /usr/lib/llvm-14/bin/../include/c++/v1/__memory/shared_ptr.h:953:48
    #7 0x55ee0f6c0c57 in std::__1::shared_ptr<Automaton> std::__1::make_shared<Automaton, exe::executors::tp::compute::ThreadPool&, void>(exe::executors::tp::compute::ThreadPool&) /usr/lib/llvm-14/bin/../include/c++/v1/__memory/shared_ptr.h:963:12
    #8 0x55ee0f6c0c57 in StressTest() /workspace/concurrency-course/tasks/tasks/executors/tests/executors/strand/lifetime.cpp:44:22
    #9 0x55ee0f6c1f33 in TestSuiteStrand::TwistTestRoutineAutomaton() /workspace/concurrency-course/tasks/tasks/executors/tests/executors/strand/lifetime.cpp:63:5
    #10 0x55ee0f6c1f33 in TestSuiteStrand::TestRoutineAutomaton()::$_0::operator()() const /workspace/concurrency-course/tasks/tasks/executors/tests/executors/strand/lifetime.cpp:62:3
    #11 0x55ee0f6c1f33 in decltype(std::forward<TestSuiteStrand::TestRoutineAutomaton()::$_0&>(fp)()) fu2::abi_400::detail::invocation::invoke<TestSuiteStrand::TestRoutineAutomaton()::$_0&>(TestSuiteStrand::TestRoutineAutomaton()::$_0&) /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:222:10
    #12 0x55ee0f6c1f33 in fu2::abi_400::detail::type_erasure::invocation_table::function_trait<void ()>::internal_invoker<fu2::abi_400::detail::type_erasure::box<false, TestSuiteStrand::TestRoutineAutomaton()::$_0, std::__1::allocator<TestSuiteStrand::TestRoutineAutomaton()::$_0> >, true>::invoke(fu2::abi_400::detail::type_erasure::data_accessor*, unsigned long) /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:628:1
    #13 0x55ee0f766bbe in decltype(auto) fu2::abi_400::detail::type_erasure::erasure<true, fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >::invoke<0ul, fu2::abi_400::detail::type_erasure::erasure<true, fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >&>(fu2::abi_400::detail::type_erasure::erasure<true, fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >&) /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:1258:37
    #14 0x55ee0f766bbe in fu2::abi_400::detail::type_erasure::invocation_table::operator_impl<0ul, fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >, void ()>::operator()() /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:816:1
    #15 0x55ee0f766bbe in twist::rt::fiber::Fiber::Run() /tmp/clippy-build/FaultyFibersASan/_deps/twist-src/twist/rt/layer/fiber/runtime/fiber.cpp:29:5

Indirect leak of 171312 byte(s) in 7138 object(s) allocated from:
    #0 0x55ee0f6be3bd in operator new(unsigned long) (/tmp/clippy-build/FaultyFibersASan/tasks/tasks/executors/bin/task_tasks_executors_strand_lifetime_tests+0x19e3bd) (BuildId: ee3f60473ef9d62923a5461370b8fb9a170ba1b0)
    #1 0x55ee0f7b109f in std::__1::__unique_if<twist::rt::fault::FaultyMutex>::__unique_single std::__1::make_unique<twist::rt::fault::FaultyMutex>() /usr/lib/llvm-14/bin/../include/c++/v1/__memory/unique_ptr.h:725:28
    #2 0x55ee0f7b109f in exe::support::UnboundedBlockingQueue<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> > >::UnboundedBlockingQueue() /workspace/concurrency-course/tasks/tasks/executors/exe/support/queue.hpp:33:12
    #3 0x55ee0f7af435 in exe::executors::Strand::Strand(exe::executors::IExecutor&) /workspace/concurrency-course/tasks/tasks/executors/exe/executors/strand.cpp:11:9
    #4 0x55ee0f6c537b in Automaton::Automaton(exe::executors::IExecutor&) /workspace/concurrency-course/tasks/tasks/executors/tests/executors/strand/lifetime.cpp:18:9
    #5 0x55ee0f6c537b in Automaton* std::__1::construct_at<Automaton, exe::executors::tp::compute::ThreadPool&, Automaton*>(Automaton*, exe::executors::tp::compute::ThreadPool&) /usr/lib/llvm-14/bin/../include/c++/v1/__memory/construct_at.h:38:50
    #6 0x55ee0f6c537b in void std::__1::allocator_traits<std::__1::allocator<Automaton> >::construct<Automaton, exe::executors::tp::compute::ThreadPool&, void, void>(std::__1::allocator<Automaton>&, Automaton*, exe::executors::tp::compute::ThreadPool&) /usr/lib/llvm-14/bin/../include/c++/v1/__memory/allocator_traits.h:298:9
    #7 0x55ee0f6c537b in std::__1::__shared_ptr_emplace<Automaton, std::__1::allocator<Automaton> >::__shared_ptr_emplace<exe::executors::tp::compute::ThreadPool&>(std::__1::allocator<Automaton>, exe::executors::tp::compute::ThreadPool&) /usr/lib/llvm-14/bin/../include/c++/v1/__memory/shared_ptr.h:293:9
    #8 0x55ee0f6c4efe in std::__1::shared_ptr<Automaton> std::__1::allocate_shared<Automaton, std::__1::allocator<Automaton>, exe::executors::tp::compute::ThreadPool&, void>(std::__1::allocator<Automaton> const&, exe::executors::tp::compute::ThreadPool&) /usr/lib/llvm-14/bin/../include/c++/v1/__memory/shared_ptr.h:954:55
    #9 0x55ee0f6c0c57 in std::__1::shared_ptr<Automaton> std::__1::make_shared<Automaton, exe::executors::tp::compute::ThreadPool&, void>(exe::executors::tp::compute::ThreadPool&) /usr/lib/llvm-14/bin/../include/c++/v1/__memory/shared_ptr.h:963:12
    #10 0x55ee0f6c0c57 in StressTest() /workspace/concurrency-course/tasks/tasks/executors/tests/executors/strand/lifetime.cpp:44:22
    #11 0x55ee0f6c1f33 in TestSuiteStrand::TwistTestRoutineAutomaton() /workspace/concurrency-course/tasks/tasks/executors/tests/executors/strand/lifetime.cpp:63:5
    #12 0x55ee0f6c1f33 in TestSuiteStrand::TestRoutineAutomaton()::$_0::operator()() const /workspace/concurrency-course/tasks/tasks/executors/tests/executors/strand/lifetime.cpp:62:3
    #13 0x55ee0f6c1f33 in decltype(std::forward<TestSuiteStrand::TestRoutineAutomaton()::$_0&>(fp)()) fu2::abi_400::detail::invocation::invoke<TestSuiteStrand::TestRoutineAutomaton()::$_0&>(TestSuiteStrand::TestRoutineAutomaton()::$_0&) /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:222:10
    #14 0x55ee0f6c1f33 in fu2::abi_400::detail::type_erasure::invocation_table::function_trait<void ()>::internal_invoker<fu2::abi_400::detail::type_erasure::box<false, TestSuiteStrand::TestRoutineAutomaton()::$_0, std::__1::allocator<TestSuiteStrand::TestRoutineAutomaton()::$_0> >, true>::invoke(fu2::abi_400::detail::type_erasure::data_accessor*, unsigned long) /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:628:1
    #15 0x55ee0f766bbe in decltype(auto) fu2::abi_400::detail::type_erasure::erasure<true, fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >::invoke<0ul, fu2::abi_400::detail::type_erasure::erasure<true, fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >&>(fu2::abi_400::detail::type_erasure::erasure<true, fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >&) /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:1258:37
    #16 0x55ee0f766bbe in fu2::abi_400::detail::type_erasure::invocation_table::operator_impl<0ul, fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >, void ()>::operator()() /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:816:1
    #17 0x55ee0f766bbe in twist::rt::fiber::Fiber::Run() /tmp/clippy-build/FaultyFibersASan/_deps/twist-src/twist/rt/layer/fiber/runtime/fiber.cpp:29:5

Indirect leak of 57104 byte(s) in 7138 object(s) allocated from:
    #0 0x55ee0f6be3bd in operator new(unsigned long) (/tmp/clippy-build/FaultyFibersASan/tasks/tasks/executors/bin/task_tasks_executors_strand_lifetime_tests+0x19e3bd) (BuildId: ee3f60473ef9d62923a5461370b8fb9a170ba1b0)
    #1 0x55ee0f7b511e in void* std::__1::__libcpp_operator_new<unsigned long>(unsigned long) /usr/lib/llvm-14/bin/../include/c++/v1/new:245:10
    #2 0x55ee0f7b511e in std::__1::__libcpp_allocate(unsigned long, unsigned long) /usr/lib/llvm-14/bin/../include/c++/v1/new:271:10
    #3 0x55ee0f7b511e in std::__1::allocator<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >*>::allocate(unsigned long) /usr/lib/llvm-14/bin/../include/c++/v1/__memory/allocator.h:105:38
    #4 0x55ee0f7b511e in std::__1::allocator_traits<std::__1::allocator<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >*> >::allocate(std::__1::allocator<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >*>&, unsigned long) /usr/lib/llvm-14/bin/../include/c++/v1/__memory/allocator_traits.h:262:20
    #5 0x55ee0f7b511e in std::__1::__split_buffer<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >*, std::__1::allocator<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >*>&>::__split_buffer(unsigned long, unsigned long, std::__1::allocator<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >*>&) /usr/lib/llvm-14/bin/../include/c++/v1/__split_buffer:306:29
    #6 0x55ee0f7b389c in std::__1::deque<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >, std::__1::allocator<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> > > >::__add_back_capacity() /usr/lib/llvm-14/bin/../include/c++/v1/deque:2580:13
    #7 0x55ee0f7b347e in std::__1::deque<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >, std::__1::allocator<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> > > >::push_back(fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >&&) /usr/lib/llvm-14/bin/../include/c++/v1/deque:1938:9
    #8 0x55ee0f7b139b in std::__1::queue<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >, std::__1::deque<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >, std::__1::allocator<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> > > > >::push(fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >&&) /usr/lib/llvm-14/bin/../include/c++/v1/queue:355:41
    #9 0x55ee0f7b139b in exe::support::UnboundedBlockingQueue<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> > >::Put(fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >) /workspace/concurrency-course/tasks/tasks/executors/exe/support/queue.hpp:52:14
    #10 0x55ee0f7af734 in exe::executors::Strand::Submit(fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >) /workspace/concurrency-course/tasks/tasks/executors/exe/executors/strand.cpp:20:10
    #11 0x55ee0f6c2ab2 in void exe::executors::Submit<Automaton::AsyncMutate()::'lambda'()>(exe::executors::IExecutor&, Automaton::AsyncMutate()::'lambda'()&&) /workspace/concurrency-course/tasks/tasks/executors/exe/executors/submit.hpp:18:7
    #12 0x55ee0f6c0dfd in Automaton::AsyncMutate() /workspace/concurrency-course/tasks/tasks/executors/tests/executors/strand/lifetime.cpp:22:5
    #13 0x55ee0f6c0dfd in StressTest() /workspace/concurrency-course/tasks/tasks/executors/tests/executors/strand/lifetime.cpp:48:18
    #14 0x55ee0f6c1f33 in TestSuiteStrand::TwistTestRoutineAutomaton() /workspace/concurrency-course/tasks/tasks/executors/tests/executors/strand/lifetime.cpp:63:5
    #15 0x55ee0f6c1f33 in TestSuiteStrand::TestRoutineAutomaton()::$_0::operator()() const /workspace/concurrency-course/tasks/tasks/executors/tests/executors/strand/lifetime.cpp:62:3
    #16 0x55ee0f6c1f33 in decltype(std::forward<TestSuiteStrand::TestRoutineAutomaton()::$_0&>(fp)()) fu2::abi_400::detail::invocation::invoke<TestSuiteStrand::TestRoutineAutomaton()::$_0&>(TestSuiteStrand::TestRoutineAutomaton()::$_0&) /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:222:10
    #17 0x55ee0f6c1f33 in fu2::abi_400::detail::type_erasure::invocation_table::function_trait<void ()>::internal_invoker<fu2::abi_400::detail::type_erasure::box<false, TestSuiteStrand::TestRoutineAutomaton()::$_0, std::__1::allocator<TestSuiteStrand::TestRoutineAutomaton()::$_0> >, true>::invoke(fu2::abi_400::detail::type_erasure::data_accessor*, unsigned long) /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:628:1
    #18 0x55ee0f766bbe in decltype(auto) fu2::abi_400::detail::type_erasure::erasure<true, fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >::invoke<0ul, fu2::abi_400::detail::type_erasure::erasure<true, fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >&>(fu2::abi_400::detail::type_erasure::erasure<true, fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >&) /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:1258:37
    #19 0x55ee0f766bbe in fu2::abi_400::detail::type_erasure::invocation_table::operator_impl<0ul, fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >, void ()>::operator()() /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:816:1
    #20 0x55ee0f766bbe in twist::rt::fiber::Fiber::Run() /tmp/clippy-build/FaultyFibersASan/_deps/twist-src/twist/rt/layer/fiber/runtime/fiber.cpp:29:5

Indirect leak of 28552 byte(s) in 7138 object(s) allocated from:
    #0 0x55ee0f6be3bd in operator new(unsigned long) (/tmp/clippy-build/FaultyFibersASan/tasks/tasks/executors/bin/task_tasks_executors_strand_lifetime_tests+0x19e3bd) (BuildId: ee3f60473ef9d62923a5461370b8fb9a170ba1b0)
    #1 0x55ee0f7bf886 in std::__1::__unique_if<twist::rt::fault::FaultyCondVar::Impl>::__unique_single std::__1::make_unique<twist::rt::fault::FaultyCondVar::Impl>() /usr/lib/llvm-14/bin/../include/c++/v1/__memory/unique_ptr.h:725:28
    #2 0x55ee0f7bf886 in twist::rt::fault::FaultyCondVar::FaultyCondVar() /tmp/clippy-build/FaultyFibersASan/_deps/twist-src/twist/rt/layer/fault/stdlike/condvar/condvar.cpp:20:14
    #3 0x55ee0f7b102a in exe::support::UnboundedBlockingQueue<fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> > >::UnboundedBlockingQueue() /workspace/concurrency-course/tasks/tasks/executors/exe/support/queue.hpp:31:3
    #4 0x55ee0f7af435 in exe::executors::Strand::Strand(exe::executors::IExecutor&) /workspace/concurrency-course/tasks/tasks/executors/exe/executors/strand.cpp:11:9
    #5 0x55ee0f6c537b in Automaton::Automaton(exe::executors::IExecutor&) /workspace/concurrency-course/tasks/tasks/executors/tests/executors/strand/lifetime.cpp:18:9
    #6 0x55ee0f6c537b in Automaton* std::__1::construct_at<Automaton, exe::executors::tp::compute::ThreadPool&, Automaton*>(Automaton*, exe::executors::tp::compute::ThreadPool&) /usr/lib/llvm-14/bin/../include/c++/v1/__memory/construct_at.h:38:50
    #7 0x55ee0f6c537b in void std::__1::allocator_traits<std::__1::allocator<Automaton> >::construct<Automaton, exe::executors::tp::compute::ThreadPool&, void, void>(std::__1::allocator<Automaton>&, Automaton*, exe::executors::tp::compute::ThreadPool&) /usr/lib/llvm-14/bin/../include/c++/v1/__memory/allocator_traits.h:298:9
    #8 0x55ee0f6c537b in std::__1::__shared_ptr_emplace<Automaton, std::__1::allocator<Automaton> >::__shared_ptr_emplace<exe::executors::tp::compute::ThreadPool&>(std::__1::allocator<Automaton>, exe::executors::tp::compute::ThreadPool&) /usr/lib/llvm-14/bin/../include/c++/v1/__memory/shared_ptr.h:293:9
    #9 0x55ee0f6c4efe in std::__1::shared_ptr<Automaton> std::__1::allocate_shared<Automaton, std::__1::allocator<Automaton>, exe::executors::tp::compute::ThreadPool&, void>(std::__1::allocator<Automaton> const&, exe::executors::tp::compute::ThreadPool&) /usr/lib/llvm-14/bin/../include/c++/v1/__memory/shared_ptr.h:954:55
    #10 0x55ee0f6c0c57 in std::__1::shared_ptr<Automaton> std::__1::make_shared<Automaton, exe::executors::tp::compute::ThreadPool&, void>(exe::executors::tp::compute::ThreadPool&) /usr/lib/llvm-14/bin/../include/c++/v1/__memory/shared_ptr.h:963:12
    #11 0x55ee0f6c0c57 in StressTest() /workspace/concurrency-course/tasks/tasks/executors/tests/executors/strand/lifetime.cpp:44:22
    #12 0x55ee0f6c1f33 in TestSuiteStrand::TwistTestRoutineAutomaton() /workspace/concurrency-course/tasks/tasks/executors/tests/executors/strand/lifetime.cpp:63:5
    #13 0x55ee0f6c1f33 in TestSuiteStrand::TestRoutineAutomaton()::$_0::operator()() const /workspace/concurrency-course/tasks/tasks/executors/tests/executors/strand/lifetime.cpp:62:3
    #14 0x55ee0f6c1f33 in decltype(std::forward<TestSuiteStrand::TestRoutineAutomaton()::$_0&>(fp)()) fu2::abi_400::detail::invocation::invoke<TestSuiteStrand::TestRoutineAutomaton()::$_0&>(TestSuiteStrand::TestRoutineAutomaton()::$_0&) /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:222:10
    #15 0x55ee0f6c1f33 in fu2::abi_400::detail::type_erasure::invocation_table::function_trait<void ()>::internal_invoker<fu2::abi_400::detail::type_erasure::box<false, TestSuiteStrand::TestRoutineAutomaton()::$_0, std::__1::allocator<TestSuiteStrand::TestRoutineAutomaton()::$_0> >, true>::invoke(fu2::abi_400::detail::type_erasure::data_accessor*, unsigned long) /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:628:1
    #16 0x55ee0f766bbe in decltype(auto) fu2::abi_400::detail::type_erasure::erasure<true, fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >::invoke<0ul, fu2::abi_400::detail::type_erasure::erasure<true, fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >&>(fu2::abi_400::detail::type_erasure::erasure<true, fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >&) /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:1258:37
    #17 0x55ee0f766bbe in fu2::abi_400::detail::type_erasure::invocation_table::operator_impl<0ul, fu2::abi_400::detail::function<fu2::abi_400::detail::config<true, false, fu2::capacity_default>, fu2::abi_400::detail::property<true, false, void ()> >, void ()>::operator()() /tmp/clippy-build/FaultyFibersASan/_deps/function2-src/include/function2/function2.hpp:816:1
    #18 0x55ee0f766bbe in twist::rt::fiber::Fiber::Run() /tmp/clippy-build/FaultyFibersASan/_deps/twist-src/twist/rt/layer/fiber/runtime/fiber.cpp:29:5

SUMMARY: AddressSanitizer: 30636296 byte(s) leaked in 35690 allocation(s).
